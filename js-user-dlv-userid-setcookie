function () {
  var dlvUserId = {{user-dlv-userid}};
  var el = document.querySelector('[id="userid"]');
  var inputUserId = el ? el.value : undefined;

  // Prioriza Data Layer; se vazio/indefinido, usa o input
  var userid = (dlvUserId !== null && dlvUserId !== undefined && dlvUserId !== '')
    ? dlvUserId
    : inputUserId;

  if (userid !== null && userid !== undefined && String(userid).trim() !== '') {
    var formattedUserId = String(userid).trim();

    var expirationDate = new Date();
    expirationDate.setDate(expirationDate.getDate() + 30);
    document.cookie = "LeadUserId=" + encodeURIComponent(formattedUserId) +
                      "; expires=" + expirationDate.toUTCString() +
                      "; path=/";

    return formattedUserId;
  }
  return null;
}
